<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>🎫 패키지구성 | WOS 계산기</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6 font-sans text-sm">
  <div class="max-w-6xl mx-auto bg-white p-6 rounded-xl shadow-md space-y-5">
    <h1 class="text-2xl font-bold text-gray-800">📘 WOS 공략집</h1>
    <div id="GuideGridBody" class="grid grid-cols-2 gap-4"></div>
    <details class="bg-white border border-indigo-300 rounded-md p-4">
      <summary class="cursor-pointer text-lg font-bold text-indigo-700 mb-2">🧬 세대별 영웅 특성</summary>
      <div id="heroTableContainer" class="mt-3 overflow-x-auto">
        <p class="text-gray-500 text-sm">📦 데이터 로딩 중...</p>
      </div>
    </details>
    
    <!-- 🛫 이민 시스템 안내 -->
    <details class="bg-white border border-gray-300 rounded-md p-4">
      <summary class="cursor-pointer text-lg font-bold text-blue-700 mb-2">🛫 이민 시스템 안내</summary>
      <div id="StatusTranferContainer" class="mt-3 space-y-4 text-sm text-gray-800">
        <p class="text-gray-500 text-sm">📦 데이터 로딩 중...</p>        
      </div>
    </details>
    
    <!-- 🧪 헬리오스 연구 참고자료 섹션 -->
    <details class="bg-white border border-red-300 rounded-md p-4">
      <summary class="cursor-pointer text-lg font-bold text-red-600 mb-2">🧪 헬리오스(T11)</summary>
      <div class="mt-3">
        <img src="https://raw.githubusercontent.com/s574shinchan/WOS_Calc/7b8601795ff8a85932540f79e4bda456044026e8/images/T11Research.png"
             alt="헬리오스 참고 이미지"
             class="w-full mx-auto rounded shadow"
             onclick="openImagePopup(this.src)"
          />
      </div>
    </details>

    <!-- 팝업 이미지 뷰어 -->
    <div id="imagePopupLayer" class="fixed inset-0 bg-black bg-opacity-80 hidden z-[9999] overflow-auto">
      <div class="flex items-center justify-center min-h-screen p-4">
        <img id="popupImage" src=""
             class="max-w-none max-h-none transform scale-100 transition duration-300" />
      </div>
    </div>
    
    <!-- 📦 각종 패키지 구성 섹션 -->
    <details class="bg-white border border-gray-300 rounded-md p-4">
      <summary class="cursor-pointer text-lg font-bold text-purple-700 mb-2">📦 각종 패키지 구성</summary>
      <div class="mt-3 space-y-4 text-sm text-gray-800">
        
        <!-- 💎 보석마스터 패키지 구성 -->
        <details class="bg-white border border-purple-300 rounded-md p-4">
          <summary class="cursor-pointer text-lg font-bold text-purple-700 mb-2">💎 보석마스터 패키지</summary>
          <div class="space-y-4 text-sm text-gray-800 mt-2">
            <div>
              <h3 class="font-semibold text-purple-500">🔹 FC8 구성</h3>
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center">
                  <thead class="bg-purple-100">
                    <tr><tr><th class="border p-1">금액</th><th class="border p-1">보석재료상자</th><th class="border p-1">보석도면</th><th class="border p-1">보석매뉴얼</th></tr></tr>
                  </thead>
                  <tbody>
                    <tr><td class="border p-1">7,500</td><td class="border p-1">10</td><td class="border p-1">40</td><td class="border p-1">20</td></tr>
                    <tr><td class="border p-1">15,000</td><td class="border p-1">20</td><td class="border p-1">80</td><td class="border p-1">40</td></tr>
                    <tr><td class="border p-1">30,000</td><td class="border p-1">40</td><td class="border p-1">160</td><td class="border p-1">80</td></tr>
                    <tr><td class="border p-1">79,000</td><td class="border p-1">100</td><td class="border p-1">400</td><td class="border p-1">200</td></tr>
                    <tr><td class="border p-1">149,000</td><td class="border p-1">100</td><td class="border p-1">400</td><td class="border p-1">200</td></tr>
                    <tr><td class="border p-1">합　계</td><td class="border p-1">270</td><td class="border p-1">1,080</td><td class="border p-1">540</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div>
              <h3 class="font-semibold text-purple-500 mt-2">🔹 FC10 구성</h3>
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center">
                  <thead class="bg-purple-100">
                    <tr><tr><th class="border p-1">금액</th><th class="border p-1">보석재료상자</th><th class="border p-1">보석도면</th><th class="border p-1">보석매뉴얼</th></tr></tr>
                  </thead>
                  <tbody>
                    <tr><td class="border p-1">7,500</td><td class="border p-1">10</td><td class="border p-1">40</td><td class="border p-1">35</td></tr>
                    <tr><td class="border p-1">15,000</td><td class="border p-1">20</td><td class="border p-1">80</td><td class="border p-1">70</td></tr>
                    <tr><td class="border p-1">30,000</td><td class="border p-1">40</td><td class="border p-1">160</td><td class="border p-1">140</td></tr>
                    <tr><td class="border p-1">79,000</td><td class="border p-1">100</td><td class="border p-1">400</td><td class="border p-1">350</td></tr>
                    <tr><td class="border p-1">149,000</td><td class="border p-1">200</td><td class="border p-1">800</td><td class="border p-1">700</td></tr>
                    <tr><td class="border p-1">합　계</td><td class="border p-1">370</td><td class="border p-1">1,480</td><td class="border p-1">1,295</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </details>

        <!-- 💠 보석비전 패키지 -->
        <details class="bg-white border border-purple-300 rounded-md p-4">
          <summary class="cursor-pointer text-lg font-bold text-purple-700 mb-2">💠 보석비전 패키지</summary>
          <div class="mt-2">
            <div class="overflow-x-auto">
              <table class="table-auto border w-full text-xs text-center">
                <thead class="bg-purple-100">
                  <tr><th class="border p-1">금액</th><th class="border p-1">매뉴얼</th><th class="border p-1">도면</th><th class="border p-1">비전</th></tr>
                </thead>
                <tbody>
                  <tr><td class="border p-1">7,500</td><td class="border p-1">7</td><td class="border p-1">7</td><td class="border p-1">2</td></tr>
                  <tr><td class="border p-1">15,000</td><td class="border p-1">14</td><td class="border p-1">14</td><td class="border p-1">4</td></tr>
                  <tr><td class="border p-1">30,000</td><td class="border p-1">28</td><td class="border p-1">28</td><td class="border p-1">8</td></tr>
                  <tr><td class="border p-1">79,000</td><td class="border p-1">70</td><td class="border p-1">70</td><td class="border p-1">20</td></tr>
                  <tr><td class="border p-1">149,000</td><td class="border p-1">140</td><td class="border p-1">140</td><td class="border p-1">40</td></tr>
                </tbody>
              </table>
            </div>
            <p class="text-xs text-gray-600 mt-1">📌 참고 : 149,000 패키지는 <span class="font-semibold text-red-500">최대 20번</span>까지 구매 가능합니다.</p>
          </div>
        </details>

        <!-- 커스텀상자 패키지-->
        <details class="bg-white border border-orange-300 rounded-md p-4">
          <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">📦 커스텀상자 패키지</summary>
          <div class="space-y-6 mt-2">
            
            <!-- FC8 구성 -->
            <div>
              <h3 class="font-semibold text-orange-500">🔸 FC8 구성</h3>
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center">
                  <thead class="bg-orange-100">
                    <tr>
                      <th class="border p-1">금액 | 항목</th>
                      <th class="border p-1">불의수정</th>
                      <th class="border p-1">건설가속(1h)</th>
                      <th class="border p-1">연구가속(1h)</th>
                      <th class="border p-1">훈련가속(1h)</th>
                      <th class="border p-1">철강재</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td class="border p-1">7,500</td><td class="border p-1">78</td><td class="border p-1">54</td><td class="border p-1">54</td><td class="border p-1">54</td><td class="border p-1">75,000</td></tr>
                    <tr><td class="border p-1">15,000</td><td class="border p-1">150</td><td class="border p-1">105</td><td class="border p-1">105</td><td class="border p-1">105</td><td class="border p-1">150,000</td></tr>
                    <tr><td class="border p-1">30,000</td><td class="border p-1">276</td><td class="border p-1">192</td><td class="border p-1">192</td><td class="border p-1">192</td><td class="border p-1">300,000</td></tr>
                    <tr><td class="border p-1">79,000</td><td class="border p-1">672</td><td class="border p-1">465</td><td class="border p-1">465</td><td class="border p-1">465</td><td class="border p-1">750,000</td></tr>
                    <tr><td class="border p-1">149,000</td><td class="border p-1">1,344</td><td class="border p-1">930</td><td class="border p-1">930</td><td class="border p-1">930</td><td class="border p-1">1,500,000</td></tr>
                    <tr><td class="border p-1">합　계</td><td class="border p-1">2,520</td><td class="border p-1">1,746</td><td class="border p-1">1,746</td><td class="border p-1">1,746</td><td class="border p-1">2,775,000</td></tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- FC10 구성 -->
            <div>
              <h3 class="font-semibold text-orange-500">🔸 FC10 구성</h3>
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center">
                  <thead class="bg-orange-100">
                    <tr>
                      <th class="border p-1">금액 | 항목</th>
                      <th class="border p-1">불의수정</th>
                      <th class="border p-1">건설가속(1h)</th>
                      <th class="border p-1">연구가속(1h)</th>
                      <th class="border p-1">훈련가속(1h)</th>
                      <th class="border p-1">설계도면</th>
                      <th class="border p-1">영주장비상자</th>
                      <th class="border p-1">철강재</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td class="border p-1">7,500</td><td class="border p-1">90</td><td class="border p-1">66</td><td class="border p-1">66</td><td class="border p-1">66</td><td class="border p-1">72</td><td class="border p-1">36</td><td class="border p-1">75,000</td></tr>
                    <tr><td class="border p-1">15,000</td><td class="border p-1">174</td><td class="border p-1">117</td><td class="border p-1">117</td><td class="border p-1">117</td><td class="border p-1">144</td><td class="border p-1">72</td><td class="border p-1">150,000</td></tr>
                    <tr><td class="border p-1">30,000</td><td class="border p-1">315</td><td class="border p-1">204</td><td class="border p-1">204</td><td class="border p-1">204</td><td class="border p-1">288</td><td class="border p-1">144</td><td class="border p-1">300,000</td></tr>
                    <tr><td class="border p-1">79,000</td><td class="border p-1">780</td><td class="border p-1">483</td><td class="border p-1">483</td><td class="border p-1">483</td><td class="border p-1">720</td><td class="border p-1">360</td><td class="border p-1">750,000</td></tr>
                    <tr><td class="border p-1">149,000</td><td class="border p-1">1,545</td><td class="border p-1">966</td><td class="border p-1">966</td><td class="border p-1">966</td><td class="border p-1">1,440</td><td class="border p-1">720</td><td class="border p-1">1,500,000</td></tr>
                    <tr><td class="border p-1">합계</td><td class="border p-1">2,904</td><td class="border p-1">1,836</td><td class="border p-1">1,836</td><td class="border p-1">1836</td><td class="border p-1">2,664</td><td class="border p-1">1,332</td><td class="border p-1">2,775,000</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </details>

        <!-- 🛠️ 커스텀 무기상자 패키지 -->
        <details class="bg-white border border-orange-300 rounded-md p-4">
          <summary class="cursor-pointer text-lg font-bold text-orange-700 mb-2">🛠️ 커스텀 무기상자 패키지</summary>
          <div class="space-y-6 mt-2">
            <!-- FC8 구성 -->
            <div>
              <h3 class="font-semibold text-orange-500">🔸 FC8 구성</h3>
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center">
                  <thead class="bg-orange-100">
                    <tr>
                      <th class="border p-1 bg-orange-100">금액</th>
                      <th class="border p-1 bg-orange-100">보라너트</th>
                      <th class="border p-1 bg-orange-100">장비랜덤상자</th>
                      <th class="border p-1 bg-orange-100">마스터리석</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td class="border p-1">7,500</td><td class="border p-1">18</td><td class="border p-1">10</td><td class="border p-1">10</td></tr>
                      <tr><td class="border p-1">15,000</td><td class="border p-1">36</td><td class="border p-1">20</td><td class="border p-1">20</td></tr>
                      <tr><td class="border p-1">30,000</td><td class="border p-1">72</td><td class="border p-1">40</td><td class="border p-1">40</td></tr>
                      <tr><td class="border p-1">79,000</td><td class="border p-1">180</td><td class="border p-1">100</td><td class="border p-1">100</td></tr>
                      <tr><td class="border p-1">149,000</td><td class="border p-1">360</td><td class="border p-1">200</td><td class="border p-1">200</td></tr>
                      <tr><td class="border p-1">합계</td><td class="border p-1">666</td><td class="border p-1">370</td><td class="border p-1">370</td></tr>
                    </tbody>
                </table>
              </div>
            </div>
        
            <!-- FC10 구성 -->
            <div>
              <h3 class="font-semibold text-orange-500">🔸 FC10 구성</h3>
              <div class="overflow-x-auto">
                <table class="table-auto border w-full text-xs text-center">
                  <thead class="bg-orange-100">
                    <tr>
                      <th class="border p-1 bg-orange-100">금액</th>
                      <th class="border p-1 bg-orange-100">보라너트</th>
                      <th class="border p-1 bg-orange-100">장비랜덤상자</th>
                      <th class="border p-1 bg-orange-100">마스터리석</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr><td class="border p-1">7,500</td><td class="border p-1">22</td><td class="border p-1">12</td><td class="border p-1">12</td></tr>
                    <tr><td class="border p-1">15,000</td><td class="border p-1">44</td><td class="border p-1">24</td><td class="border p-1">24</td></tr>
                    <tr><td class="border p-1">30,000</td><td class="border p-1">88</td><td class="border p-1">48</td><td class="border p-1">48</td></tr>
                    <tr><td class="border p-1">79,000</td><td class="border p-1">220</td><td class="border p-1">120</td><td class="border p-1">120</td></tr>
                    <tr><td class="border p-1">149,000</td><td class="border p-1">440</td><td class="border p-1">240</td><td class="border p-1">240</td></tr>
                    <tr><td class="border p-1">합계</td><td class="border p-1">814</td><td class="border p-1">444</td><td class="border p-1">444</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
        </details>
      </div>
    </details>
    
    <script>
      const popup = document.getElementById("imagePopupLayer");
      const img = document.getElementById("popupImage");
  
      let scale = 1, offsetX = 0, offsetY = 0, isDragging = false;
      let startX = 0, startY = 0;
  
      function openPopupImage(src) {
        popup.classList.remove("hidden");
        img.src = src;
        scale = 1;
        offsetX = 0;
        offsetY = 0;
        img.style.transform = "scale(1) translate(0px, 0px)";
      }
  
      popup.addEventListener("click", () => popup.classList.add("hidden"));
  
      img.addEventListener("wheel", (e) => {
        e.preventDefault();
        scale += e.deltaY < 0 ? 0.1 : -0.1;
        scale = Math.min(5, Math.max(0.5, scale));
        img.style.transform = `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`;
      });
  
      img.addEventListener("mousedown", (e) => {
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        e.stopPropagation();
      });
  
      window.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        offsetX += e.clientX - startX;
        offsetY += e.clientY - startY;
        startX = e.clientX;
        startY = e.clientY;
        img.style.transform = `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`;
      });
  
      window.addEventListener("mouseup", () => isDragging = false);
  
      // 모바일 터치
      let touchStart = null;
      img.addEventListener("touchstart", (e) => {
        touchStart = e.touches[0];
      });
      img.addEventListener("touchmove", (e) => {
        if (!touchStart) return;
        const touch = e.touches[0];
        offsetX += touch.clientX - touchStart.clientX;
        offsetY += touch.clientY - touchStart.clientY;
        touchStart = touch;
        img.style.transform = `scale(${scale}) translate(${offsetX}px, ${offsetY}px)`;
        e.preventDefault();
      });
      img.addEventListener("touchend", () => touchStart = null);
    </script>
    
    <script>
      function sendHeightToParent() {
        const height = document.documentElement.scrollHeight + 5;
        window.parent.postMessage({ iframeHeight: height }, "*");
      }
    
      window.addEventListener("load", sendHeightToParent);
      document.querySelectorAll("details").forEach((detail) => {
        detail.addEventListener("toggle", () => {
          if (detail.open) {
            setTimeout(sendHeightToParent, 300); // 펼쳐진 후 높이 반영
          }
        });
      });
    </script>
    
    <script>
      let heroTableLoaded = false;

      document.querySelector('summary').addEventListener('click', async () => {
        const container = document.getElementById('heroTableContainer');
        if (heroTableLoaded) return;
    
        try {
          const response = await fetch('https://s574shinchan.github.io/WOS_Calc/data/genhero.html');
          if (!response.ok) throw new Error('파일 요청 실패');
    
          const html = await response.text();
          container.innerHTML = html;
          heroTableLoaded = true;
        } catch (e) {
          container.innerHTML = `<p class="text-red-500">⚠️ 테이블 데이터를 불러오는 데 실패했습니다.</p>`;
        }
      });

      let StatusTranferLoaded = false;
      document.querySelector('summary').addEventListener('click', async () => {
        const container = document.getElementById('StatusTranferContainer');
        if (StatusTranferLoaded) return;
    
        try {
          const response = await fetch('https://s574shinchan.github.io/WOS_Calc/data/StatusTransfer.html');
          if (!response.ok) throw new Error('파일 요청 실패');
    
          const html = await response.text();
          container.innerHTML = html;
          StatusTranferLoaded = true;
        } catch (e) {
          container.innerHTML = `<p class="text-red-500">⚠️ 테이블 데이터를 불러오는 데 실패했습니다.</p>`;
        }
      });
    </script>
    
    <script>    
    document.addEventListener("contextmenu", event => event.preventDefault());
    document.addEventListener("keydown", function (e) {
      if (e.key === "F12" ||
          (e.ctrlKey && e.shiftKey && (e.key === "I" || e.key === "J")) ||
          (e.ctrlKey && (e.key === "U" || e.key === "S")))
      {
        e.preventDefault();
      }
    });
  </script>
</body>
</html>
